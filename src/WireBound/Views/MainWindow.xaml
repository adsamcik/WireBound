<Window x:Class="WireBound.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:WireBound.ViewModels"
        xmlns:views="clr-namespace:WireBound.Views"
        xmlns:tb="clr-namespace:H.NotifyIcon;assembly=H.NotifyIcon.Wpf"
        mc:Ignorable="d"
        Title="WireBound - Network Traffic Monitor" 
        Height="700" Width="1100"
        MinHeight="600" MinWidth="900"
        Background="{StaticResource BackgroundBrush}"
        WindowStyle="SingleBorderWindow"
        StateChanged="Window_StateChanged"
        Closing="Window_Closing">

    <Window.Resources>
        <DataTemplate DataType="{x:Type vm:DashboardViewModel}">
            <views:DashboardView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:HistoryViewModel}">
            <views:HistoryView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:SettingsViewModel}">
            <views:SettingsView/>
        </DataTemplate>

        <!-- System Tray Icon -->
        <tb:TaskbarIcon x:Key="TrayIcon"
                        ToolTipText="WireBound - Network Monitor"
                        TrayLeftMouseDoubleClick="TrayIcon_TrayLeftMouseDoubleClick"
                        Visibility="Visible">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Show" Click="TrayMenuItem_Show_Click"/>
                    <MenuItem Header="Hide" Click="TrayMenuItem_Hide_Click"/>
                    <Separator/>
                    <MenuItem Header="Exit" Click="TrayMenuItem_Exit_Click"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar Navigation -->
        <Border Grid.Column="0" Background="{StaticResource SurfaceBrush}">
            <DockPanel>
                <!-- App Title -->
                <StackPanel DockPanel.Dock="Top" Margin="16,20,16,30">
                    <TextBlock Text="ðŸŒ WireBound" 
                               Style="{StaticResource HeaderText}"
                               FontSize="22"/>
                    <TextBlock Text="Network Monitor" 
                               Style="{StaticResource BodyText}"
                               Margin="0,4,0,0"/>
                </StackPanel>

                <!-- Navigation Items -->
                <StackPanel DockPanel.Dock="Top">
                    <RadioButton Style="{StaticResource NavButton}"
                                 IsChecked="{Binding SelectedNavigationIndex, Converter={StaticResource IndexToBoolConverter}, ConverterParameter=0}"
                                 Command="{Binding NavigateToDashboardCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“Š" FontSize="16" Margin="0,0,10,0"/>
                            <TextBlock Text="Dashboard"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton Style="{StaticResource NavButton}"
                                 IsChecked="{Binding SelectedNavigationIndex, Converter={StaticResource IndexToBoolConverter}, ConverterParameter=1}"
                                 Command="{Binding NavigateToHistoryCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="ðŸ“ˆ" FontSize="16" Margin="0,0,10,0"/>
                            <TextBlock Text="History"/>
                        </StackPanel>
                    </RadioButton>

                    <RadioButton Style="{StaticResource NavButton}"
                                 IsChecked="{Binding SelectedNavigationIndex, Converter={StaticResource IndexToBoolConverter}, ConverterParameter=2}"
                                 Command="{Binding NavigateToSettingsCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="âš™ï¸" FontSize="16" Margin="0,0,10,0"/>
                            <TextBlock Text="Settings"/>
                        </StackPanel>
                    </RadioButton>
                </StackPanel>

                <!-- Version Info at Bottom -->
                <TextBlock DockPanel.Dock="Bottom" 
                           Text="v1.0.0" 
                           Style="{StaticResource BodyText}"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,16"/>

                <!-- Spacer -->
                <Border/>
            </DockPanel>
        </Border>

        <!-- Main Content Area -->
        <Border Grid.Column="1" Padding="16">
            <ContentControl Content="{Binding CurrentView}"/>
        </Border>
    </Grid>
</Window>
