<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:WireBound.Avalonia.ViewModels"
             xmlns:lvc="using:LiveChartsCore.SkiaSharpView.Avalonia"
             x:Class="WireBound.Avalonia.Views.InsightsView"
             x:DataType="vm:InsightsViewModel"
             Background="{StaticResource BackgroundBrush}"
             AutomationProperties.Name="Insights View">

    <ScrollViewer>
        <Grid RowDefinitions="Auto, Auto, *" Margin="28">

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- PAGE HEADER                                                          -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Grid ColumnDefinitions="*, Auto">
                <StackPanel Spacing="4">
                    <TextBlock Text="Insights" Classes="PageTitle" />
                    <TextBlock Text="Unified history and statistics" Classes="Subtitle" />
                </StackPanel>

                <!-- Period Selector -->
                <Border Grid.Column="1" Classes="CompactCard" Padding="14,10" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <TextBlock Text="Period" Classes="Caption" VerticalAlignment="Center" />
                        <StackPanel Orientation="Horizontal" Spacing="4">
                            <RadioButton GroupName="Period"
                                         IsChecked="{Binding SelectedPeriod, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsPeriod.Today}}"
                                         Command="{Binding SetPeriodCommand}"
                                         CommandParameter="{x:Static vm:InsightsPeriod.Today}"
                                         Padding="12,8"
                                         CornerRadius="8"
                                         Background="{StaticResource SurfaceBrush}"
                                         AutomationProperties.Name="Today period">
                                <RadioButton.Styles>
                                    <Style Selector="RadioButton:checked">
                                        <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                                        <Setter Property="Foreground" Value="White" />
                                    </Style>
                                </RadioButton.Styles>
                                <TextBlock Text="Today" FontSize="12" />
                            </RadioButton>
                            <RadioButton GroupName="Period"
                                         IsChecked="{Binding SelectedPeriod, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsPeriod.ThisWeek}}"
                                         Command="{Binding SetPeriodCommand}"
                                         CommandParameter="{x:Static vm:InsightsPeriod.ThisWeek}"
                                         Padding="12,8"
                                         CornerRadius="8"
                                         Background="{StaticResource SurfaceBrush}"
                                         AutomationProperties.Name="This week period">
                                <RadioButton.Styles>
                                    <Style Selector="RadioButton:checked">
                                        <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                                        <Setter Property="Foreground" Value="White" />
                                    </Style>
                                </RadioButton.Styles>
                                <TextBlock Text="Week" FontSize="12" />
                            </RadioButton>
                            <RadioButton GroupName="Period"
                                         IsChecked="{Binding SelectedPeriod, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsPeriod.ThisMonth}}"
                                         Command="{Binding SetPeriodCommand}"
                                         CommandParameter="{x:Static vm:InsightsPeriod.ThisMonth}"
                                         Padding="12,8"
                                         CornerRadius="8"
                                         Background="{StaticResource SurfaceBrush}"
                                         AutomationProperties.Name="This month period">
                                <RadioButton.Styles>
                                    <Style Selector="RadioButton:checked">
                                        <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                                        <Setter Property="Foreground" Value="White" />
                                    </Style>
                                </RadioButton.Styles>
                                <TextBlock Text="Month" FontSize="12" />
                            </RadioButton>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- TAB NAVIGATION                                                       -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Border Grid.Row="1" Classes="CompactCard" Padding="6" Margin="0,20,0,0" HorizontalAlignment="Left">
                <StackPanel Orientation="Horizontal" Spacing="4">
                    <!-- Network Usage Tab -->
                    <ToggleButton IsChecked="{Binding SelectedTab, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsTab.NetworkUsage}}"
                                  Command="{Binding SelectNetworkTabCommand}"
                                  Padding="16,10"
                                  CornerRadius="10"
                                  Cursor="Hand"
                                  AutomationProperties.Name="Network Usage Tab">
                        <ToggleButton.Styles>
                            <Style Selector="ToggleButton">
                                <Setter Property="Background" Value="Transparent" />
                                <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}" />
                            </Style>
                            <Style Selector="ToggleButton:checked">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                                <Setter Property="Foreground" Value="White" />
                            </Style>
                            <Style Selector="ToggleButton:pointerover">
                                <Setter Property="Background" Value="{StaticResource FlyoutItemHoverBrush}" />
                            </Style>
                            <Style Selector="ToggleButton:checked:pointerover">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                            </Style>
                        </ToggleButton.Styles>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ“Š" FontSize="14" VerticalAlignment="Center" />
                            <TextBlock Text="Network Usage" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center" />
                        </StackPanel>
                    </ToggleButton>

                    <!-- System Trends Tab -->
                    <ToggleButton IsChecked="{Binding SelectedTab, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsTab.SystemTrends}}"
                                  Command="{Binding SelectSystemTrendsTabCommand}"
                                  Padding="16,10"
                                  CornerRadius="10"
                                  Cursor="Hand"
                                  AutomationProperties.Name="System Trends Tab">
                        <ToggleButton.Styles>
                            <Style Selector="ToggleButton">
                                <Setter Property="Background" Value="Transparent" />
                                <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}" />
                            </Style>
                            <Style Selector="ToggleButton:checked">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                                <Setter Property="Foreground" Value="White" />
                            </Style>
                            <Style Selector="ToggleButton:pointerover">
                                <Setter Property="Background" Value="{StaticResource FlyoutItemHoverBrush}" />
                            </Style>
                            <Style Selector="ToggleButton:checked:pointerover">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                            </Style>
                        </ToggleButton.Styles>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ’»" FontSize="14" VerticalAlignment="Center" />
                            <TextBlock Text="System Trends" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center" />
                        </StackPanel>
                    </ToggleButton>

                    <!-- Correlations Tab -->
                    <ToggleButton IsChecked="{Binding SelectedTab, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsTab.Correlations}}"
                                  Command="{Binding SelectCorrelationsTabCommand}"
                                  Padding="16,10"
                                  CornerRadius="10"
                                  Cursor="Hand"
                                  AutomationProperties.Name="Correlations Tab">
                        <ToggleButton.Styles>
                            <Style Selector="ToggleButton">
                                <Setter Property="Background" Value="Transparent" />
                                <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}" />
                            </Style>
                            <Style Selector="ToggleButton:checked">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                                <Setter Property="Foreground" Value="White" />
                            </Style>
                            <Style Selector="ToggleButton:pointerover">
                                <Setter Property="Background" Value="{StaticResource FlyoutItemHoverBrush}" />
                            </Style>
                            <Style Selector="ToggleButton:checked:pointerover">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                            </Style>
                        </ToggleButton.Styles>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ”—" FontSize="14" VerticalAlignment="Center" />
                            <TextBlock Text="Correlations" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center" />
                        </StackPanel>
                    </ToggleButton>

                    <!-- Resource Insights Tab -->
                    <ToggleButton IsChecked="{Binding SelectedTab, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsTab.ResourceInsights}}"
                                  Command="{Binding SelectResourceInsightsTabCommand}"
                                  Padding="16,10"
                                  CornerRadius="10"
                                  Cursor="Hand"
                                  AutomationProperties.Name="Resource Insights Tab">
                        <ToggleButton.Styles>
                            <Style Selector="ToggleButton">
                                <Setter Property="Background" Value="Transparent" />
                                <Setter Property="Foreground" Value="{StaticResource SecondaryTextBrush}" />
                            </Style>
                            <Style Selector="ToggleButton:checked">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                                <Setter Property="Foreground" Value="White" />
                            </Style>
                            <Style Selector="ToggleButton:pointerover">
                                <Setter Property="Background" Value="{StaticResource FlyoutItemHoverBrush}" />
                            </Style>
                            <Style Selector="ToggleButton:checked:pointerover">
                                <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                            </Style>
                        </ToggleButton.Styles>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="ðŸ§ " FontSize="14" VerticalAlignment="Center" />
                            <TextBlock Text="Resource Insights" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center" />
                        </StackPanel>
                    </ToggleButton>
                </StackPanel>
            </Border>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <!-- TAB CONTENT                                                          -->
            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Panel Grid.Row="2" Margin="0,20,0,0">

                <!-- Loading Indicator -->
                <Border Classes="Card" Padding="40"
                        IsVisible="{Binding IsLoading}"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                    <StackPanel HorizontalAlignment="Center" Spacing="16">
                        <ProgressBar IsIndeterminate="True" Width="200" />
                        <TextBlock Text="Loading insights..." 
                                   Classes="Subtitle"
                                   HorizontalAlignment="Center" />
                    </StackPanel>
                </Border>

                <!-- Error State -->
                <Border Classes="Card" Padding="40"
                        IsVisible="{Binding HasError}"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                    <StackPanel HorizontalAlignment="Center" Spacing="12">
                        <TextBlock Text="âš ï¸" FontSize="32" HorizontalAlignment="Center" />
                        <TextBlock Text="Unable to load insights"
                                   FontSize="18" FontWeight="Bold"
                                   HorizontalAlignment="Center" />
                        <TextBlock Text="{Binding ErrorMessage}"
                                   Classes="Subtitle"
                                   HorizontalAlignment="Center"
                                   TextWrapping="Wrap"
                                   MaxWidth="400" />
                    </StackPanel>
                </Border>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <!-- NETWORK USAGE TAB CONTENT                                        -->
                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <StackPanel IsVisible="{Binding SelectedTab, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsTab.NetworkUsage}}"
                            Spacing="20">

                    <!-- Summary Statistics Cards -->
                    <Grid ColumnDefinitions="*, *, *, *" IsVisible="{Binding HasData}">
                        <!-- Total Download -->
                        <Border Classes="ElevatedCard" Margin="0,0,10,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                    <Border Background="{StaticResource DownloadBgTintBrush}" CornerRadius="6" Width="28" Height="28">
                                        <TextBlock Text="â†“" FontSize="16" 
                                                   Foreground="{StaticResource DownloadBrush}"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center" />
                                    </Border>
                                    <TextBlock Text="TOTAL DOWNLOAD" Classes="MetricLabel" VerticalAlignment="Center" />
                                </StackPanel>
                                <TextBlock Text="{Binding TotalDownload}"
                                           FontSize="28" FontWeight="Bold"
                                           Foreground="{StaticResource DownloadBrush}"
                                           HorizontalAlignment="Center" />
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="4">
                                    <TextBlock Text="{Binding DownloadChangePercent, StringFormat={}{0:+0.0;-0.0;0}%}"
                                               FontSize="12"
                                               Foreground="{StaticResource SecondaryTextBrush}" />
                                    <TextBlock Text="vs last period"
                                               FontSize="12"
                                               Foreground="{StaticResource MutedTextBrush}" />
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Total Upload -->
                        <Border Grid.Column="1" Classes="ElevatedCard" Margin="5,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                    <Border Background="{StaticResource UploadBgTintBrush}" CornerRadius="6" Width="28" Height="28">
                                        <TextBlock Text="â†‘" FontSize="16" 
                                                   Foreground="{StaticResource UploadBrush}"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center" />
                                    </Border>
                                    <TextBlock Text="TOTAL UPLOAD" Classes="MetricLabel" VerticalAlignment="Center" />
                                </StackPanel>
                                <TextBlock Text="{Binding TotalUpload}"
                                           FontSize="28" FontWeight="Bold"
                                           Foreground="{StaticResource UploadBrush}"
                                           HorizontalAlignment="Center" />
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="4">
                                    <TextBlock Text="{Binding UploadChangePercent, StringFormat={}{0:+0.0;-0.0;0}%}"
                                               FontSize="12"
                                               Foreground="{StaticResource SecondaryTextBrush}" />
                                    <TextBlock Text="vs last period"
                                               FontSize="12"
                                               Foreground="{StaticResource MutedTextBrush}" />
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Peak Download Speed -->
                        <Border Grid.Column="2" Classes="ElevatedCard" Margin="5,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                    <TextBlock Text="âš¡" FontSize="16" VerticalAlignment="Center" />
                                    <TextBlock Text="PEAK DOWNLOAD" Classes="MetricLabel" VerticalAlignment="Center" />
                                </StackPanel>
                                <TextBlock Text="{Binding PeakDownloadSpeed}"
                                           FontSize="28" FontWeight="Bold"
                                           Foreground="{StaticResource DownloadBrush}"
                                           HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>

                        <!-- Peak Upload Speed -->
                        <Border Grid.Column="3" Classes="ElevatedCard" Margin="10,0,0,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                    <TextBlock Text="âš¡" FontSize="16" VerticalAlignment="Center" />
                                    <TextBlock Text="PEAK UPLOAD" Classes="MetricLabel" VerticalAlignment="Center" />
                                </StackPanel>
                                <TextBlock Text="{Binding PeakUploadSpeed}"
                                           FontSize="28" FontWeight="Bold"
                                           Foreground="{StaticResource UploadBrush}"
                                           HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>
                    </Grid>

                    <!-- Daily Usage Chart -->
                    <Border Classes="ElevatedCard" Height="280" IsVisible="{Binding HasData}">
                        <Grid RowDefinitions="Auto, *">
                            <TextBlock Text="Daily Usage" Classes="SectionHeader" />
                            <lvc:CartesianChart Grid.Row="1"
                                                Series="{Binding DailyUsageChart}"
                                                XAxes="{Binding DailyUsageXAxes}"
                                                YAxes="{Binding DailyUsageYAxes}"
                                                TooltipPosition="Top"
                                                Background="{StaticResource CardBrush}"
                                                Margin="0,12,0,0"
                                                AutomationProperties.Name="Daily Usage Bar Chart"
                                                AutomationProperties.HelpText="Bar chart showing daily download and upload totals" />
                        </Grid>
                    </Border>

                    <!-- Empty State -->
                    <Border Classes="Card" Padding="60" IsVisible="{Binding !HasData}" HorizontalAlignment="Center">
                        <StackPanel HorizontalAlignment="Center" Spacing="12">
                            <TextBlock Text="ðŸ“Š" FontSize="48" HorizontalAlignment="Center" />
                            <TextBlock Text="No network data yet"
                                       FontSize="18" FontWeight="Bold"
                                       HorizontalAlignment="Center" />
                            <TextBlock Text="Data will appear after monitoring runs for a while"
                                       Classes="Subtitle"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <!-- SYSTEM TRENDS TAB CONTENT                                        -->
                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <StackPanel IsVisible="{Binding SelectedTab, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsTab.SystemTrends}}"
                            Spacing="20">

                    <!-- Summary Statistics Cards -->
                    <Grid ColumnDefinitions="*, *, *" IsVisible="{Binding HasData}">
                        <!-- Avg CPU -->
                        <Border Classes="ElevatedCard" Margin="0,0,10,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ”²" FontSize="16" VerticalAlignment="Center" />
                                    <TextBlock Text="AVG CPU" Classes="MetricLabel" VerticalAlignment="Center" />
                                </StackPanel>
                                <TextBlock Text="{Binding AvgCpuPercent, StringFormat={}{0:F1}%}"
                                           FontSize="32" FontWeight="Bold"
                                           Foreground="{StaticResource CpuBrush}"
                                           HorizontalAlignment="Center" />
                                <TextBlock Text="{Binding CpuTrendStatus}"
                                           FontSize="12"
                                           Classes="Subtitle"
                                           HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>

                        <!-- Avg Memory -->
                        <Border Grid.Column="1" Classes="ElevatedCard" Margin="5,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ’¾" FontSize="16" VerticalAlignment="Center" />
                                    <TextBlock Text="AVG MEMORY" Classes="MetricLabel" VerticalAlignment="Center" />
                                </StackPanel>
                                <TextBlock Text="{Binding AvgMemoryPercent, StringFormat={}{0:F1}%}"
                                           FontSize="32" FontWeight="Bold"
                                           Foreground="{StaticResource MemoryBrush}"
                                           HorizontalAlignment="Center" />
                                <TextBlock Text="{Binding MemoryTrendStatus}"
                                           FontSize="12"
                                           Classes="Subtitle"
                                           HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>

                        <!-- Peak Memory -->
                        <Border Grid.Column="2" Classes="ElevatedCard" Margin="10,0,0,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
                                    <TextBlock Text="ðŸ“ˆ" FontSize="16" VerticalAlignment="Center" />
                                    <TextBlock Text="PEAK MEMORY" Classes="MetricLabel" VerticalAlignment="Center" />
                                </StackPanel>
                                <TextBlock Text="{Binding MaxMemoryPercent, StringFormat={}{0:F1}%}"
                                           FontSize="32" FontWeight="Bold"
                                           Foreground="{StaticResource WarningBrush}"
                                           HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>
                    </Grid>

                    <!-- System Metrics Chart -->
                    <Border Classes="ElevatedCard" Height="320" IsVisible="{Binding HasData}">
                        <Grid RowDefinitions="Auto, *">
                            <TextBlock Text="System Metrics Over Time" Classes="SectionHeader" />
                            <lvc:CartesianChart Grid.Row="1"
                                                Series="{Binding SystemTrendChart}"
                                                XAxes="{Binding SystemTrendXAxes}"
                                                YAxes="{Binding SystemTrendYAxes}"
                                                TooltipPosition="Top"
                                                Background="{StaticResource CardBrush}"
                                                Margin="0,12,0,0"
                                                AutomationProperties.Name="System Metrics Line Chart"
                                                AutomationProperties.HelpText="Line chart showing CPU and Memory usage over time" />
                        </Grid>
                    </Border>

                    <!-- Empty State -->
                    <Border Classes="Card" Padding="60" IsVisible="{Binding !HasData}" HorizontalAlignment="Center">
                        <StackPanel HorizontalAlignment="Center" Spacing="12">
                            <TextBlock Text="ðŸ’»" FontSize="48" HorizontalAlignment="Center" />
                            <TextBlock Text="No system data yet"
                                       FontSize="18" FontWeight="Bold"
                                       HorizontalAlignment="Center" />
                            <TextBlock Text="System metrics will appear after monitoring is active"
                                       Classes="Subtitle"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <!-- CORRELATIONS TAB CONTENT                                         -->
                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <StackPanel IsVisible="{Binding SelectedTab, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsTab.Correlations}}"
                            Spacing="20">

                    <Grid ColumnDefinitions="*, *" IsVisible="{Binding HasData}">
                        <!-- Correlation Coefficients -->
                        <Border Classes="ElevatedCard" Margin="0,0,10,0">
                            <StackPanel Spacing="16">
                                <TextBlock Text="Correlation Coefficients" Classes="SectionHeader" />

                                <!-- Network â†” CPU -->
                                <Border Background="{StaticResource BorderSubtleBrush}" CornerRadius="10" Padding="16,12">
                                    <Grid ColumnDefinitions="*, Auto">
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <TextBlock Text="ðŸŒ" FontSize="16" VerticalAlignment="Center" />
                                            <TextBlock Text="Network â†” CPU" 
                                                       FontSize="14" FontWeight="SemiBold"
                                                       VerticalAlignment="Center" />
                                        </StackPanel>
                                        <TextBlock Grid.Column="1"
                                                   Text="{Binding NetworkCpuCorrelation, StringFormat={}{0:F2}}"
                                                   FontSize="20" FontWeight="Bold"
                                                   Foreground="{StaticResource PrimaryBrush}"
                                                   VerticalAlignment="Center" />
                                    </Grid>
                                </Border>

                                <!-- Network â†” Memory -->
                                <Border Background="{StaticResource BorderSubtleBrush}" CornerRadius="10" Padding="16,12">
                                    <Grid ColumnDefinitions="*, Auto">
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <TextBlock Text="ðŸŒ" FontSize="16" VerticalAlignment="Center" />
                                            <TextBlock Text="Network â†” Memory" 
                                                       FontSize="14" FontWeight="SemiBold"
                                                       VerticalAlignment="Center" />
                                        </StackPanel>
                                        <TextBlock Grid.Column="1"
                                                   Text="{Binding NetworkMemoryCorrelation, StringFormat={}{0:F2}}"
                                                   FontSize="20" FontWeight="Bold"
                                                   Foreground="{StaticResource AccentBrush}"
                                                   VerticalAlignment="Center" />
                                    </Grid>
                                </Border>

                                <!-- CPU â†” Memory -->
                                <Border Background="{StaticResource BorderSubtleBrush}" CornerRadius="10" Padding="16,12">
                                    <Grid ColumnDefinitions="*, Auto">
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <TextBlock Text="ðŸ”²" FontSize="16" VerticalAlignment="Center" />
                                            <TextBlock Text="CPU â†” Memory" 
                                                       FontSize="14" FontWeight="SemiBold"
                                                       VerticalAlignment="Center" />
                                        </StackPanel>
                                        <TextBlock Grid.Column="1"
                                                   Text="{Binding CpuMemoryCorrelation, StringFormat={}{0:F2}}"
                                                   FontSize="20" FontWeight="Bold"
                                                   Foreground="{StaticResource SuccessBrush}"
                                                   VerticalAlignment="Center" />
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </Border>

                        <!-- Insights Panel -->
                        <Border Grid.Column="1" Classes="ElevatedCard" Margin="10,0,0,0">
                            <StackPanel Spacing="16">
                                <TextBlock Text="Insights" Classes="SectionHeader" />

                                <ItemsControl ItemsSource="{Binding CorrelationInsights}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="x:String">
                                            <Border Background="{StaticResource BorderSubtleBrush}" 
                                                    CornerRadius="8" 
                                                    Padding="12,10"
                                                    Margin="0,0,0,8">
                                                <StackPanel Orientation="Horizontal" Spacing="10">
                                                    <TextBlock Text="â€¢" 
                                                               FontSize="16" 
                                                               Foreground="{StaticResource PrimaryBrush}"
                                                               VerticalAlignment="Top" />
                                                    <TextBlock Text="{Binding}"
                                                               FontSize="13"
                                                               TextWrapping="Wrap"
                                                               VerticalAlignment="Center" />
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                                <!-- Empty insights state -->
                                <TextBlock Text="Not enough data to generate insights yet"
                                           Classes="Subtitle"
                                           IsVisible="{Binding !CorrelationInsights.Count}"
                                           HorizontalAlignment="Center"
                                           Margin="0,20" />
                            </StackPanel>
                        </Border>
                    </Grid>

                    <!-- Overlay Chart -->
                    <Border Classes="ElevatedCard" Height="320" IsVisible="{Binding HasData}">
                        <Grid RowDefinitions="Auto, *">
                            <StackPanel>
                                <TextBlock Text="Normalized Metrics Overlay" Classes="SectionHeader" />
                                <TextBlock Text="Network, CPU, and Memory trends normalized for comparison"
                                           Classes="Subtitle" Margin="0,4,0,0" />
                            </StackPanel>
                            <lvc:CartesianChart Grid.Row="1"
                                                Series="{Binding CorrelationChart}"
                                                XAxes="{Binding SystemTrendXAxes}"
                                                YAxes="{Binding SystemTrendYAxes}"
                                                TooltipPosition="Top"
                                                Background="{StaticResource CardBrush}"
                                                Margin="0,12,0,0"
                                                AutomationProperties.Name="Correlation Overlay Chart"
                                                AutomationProperties.HelpText="Overlay chart showing normalized Network, CPU, and Memory metrics" />
                        </Grid>
                    </Border>

                    <!-- Empty State -->
                    <Border Classes="Card" Padding="60" IsVisible="{Binding !HasData}" HorizontalAlignment="Center">
                        <StackPanel HorizontalAlignment="Center" Spacing="12">
                            <TextBlock Text="ðŸ”—" FontSize="48" HorizontalAlignment="Center" />
                            <TextBlock Text="No correlation data yet"
                                       FontSize="18" FontWeight="Bold"
                                       HorizontalAlignment="Center" />
                            <TextBlock Text="Correlations require both network and system data"
                                       Classes="Subtitle"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <!-- RESOURCE INSIGHTS TAB CONTENT                                    -->
                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <StackPanel IsVisible="{Binding SelectedTab, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:InsightsTab.ResourceInsights}}"
                            Spacing="20">

                    <!-- Memory / CPU Toggle -->
                    <Border Classes="CompactCard" Padding="10" HorizontalAlignment="Left">
                        <StackPanel Orientation="Horizontal" Spacing="4">
                            <TextBlock Text="Metric" Classes="Caption" VerticalAlignment="Center" Margin="0,0,8,0" />
                            <RadioButton GroupName="ResourceMetric"
                                         IsChecked="{Binding ShowMemoryMetric}"
                                         Padding="12,8"
                                         CornerRadius="8"
                                         Background="{StaticResource SurfaceBrush}"
                                         AutomationProperties.Name="Show Memory metric">
                                <RadioButton.Styles>
                                    <Style Selector="RadioButton:checked">
                                        <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                                        <Setter Property="Foreground" Value="White" />
                                    </Style>
                                </RadioButton.Styles>
                                <TextBlock Text="Memory" FontSize="12" />
                            </RadioButton>
                            <RadioButton GroupName="ResourceMetric"
                                         IsChecked="{Binding !ShowMemoryMetric}"
                                         Padding="12,8"
                                         CornerRadius="8"
                                         Background="{StaticResource SurfaceBrush}"
                                         AutomationProperties.Name="Show CPU metric">
                                <RadioButton.Styles>
                                    <Style Selector="RadioButton:checked">
                                        <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                                        <Setter Property="Foreground" Value="White" />
                                    </Style>
                                </RadioButton.Styles>
                                <TextBlock Text="CPU" FontSize="12" />
                            </RadioButton>
                        </StackPanel>
                    </Border>

                    <!-- Summary Cards -->
                    <Grid ColumnDefinitions="*, *, *, *">
                        <!-- Total Memory Used -->
                        <Border Classes="ElevatedCard" Margin="0,0,10,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <TextBlock Text="Total Memory" Classes="Caption" HorizontalAlignment="Center" />
                                <TextBlock Text="{Binding ResourceTotalMemoryUsed}" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>
                        <!-- Total CPU -->
                        <Border Grid.Column="1" Classes="ElevatedCard" Margin="5,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <TextBlock Text="Total CPU" Classes="Caption" HorizontalAlignment="Center" />
                                <TextBlock Text="{Binding ResourceTotalCpuPercent}" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>
                        <!-- App Count -->
                        <Border Grid.Column="2" Classes="ElevatedCard" Margin="5,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <TextBlock Text="Applications" Classes="Caption" HorizontalAlignment="Center" />
                                <TextBlock Text="{Binding ResourceAppCount}" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>
                        <!-- Largest Consumer -->
                        <Border Grid.Column="3" Classes="ElevatedCard" Margin="10,0,0,0">
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <TextBlock Text="Largest Consumer" Classes="Caption" HorizontalAlignment="Center" />
                                <TextBlock Text="{Binding ResourceLargestConsumer}" FontSize="16" FontWeight="Bold"
                                           HorizontalAlignment="Center" TextTrimming="CharacterEllipsis" MaxWidth="200"
                                           ToolTip.Tip="{Binding ResourceLargestConsumer}" />
                            </StackPanel>
                        </Border>
                    </Grid>

                    <!-- Charts Row -->
                    <Grid ColumnDefinitions="*, 2*">
                        <!-- Category Donut Chart -->
                        <Border Classes="Card" Padding="20" Margin="0,0,10,0">
                            <StackPanel Spacing="12">
                                <TextBlock Text="By Category" FontSize="16" FontWeight="SemiBold" />
                                <Grid>
                                    <lvc:PieChart Series="{Binding ResourceCategoryChart}"
                                                  Height="280"
                                                  LegendPosition="Right"
                                                  LegendTextPaint="{Binding LegendTextPaint}"
                                                  LegendTextSize="12"
                                                  Background="{StaticResource CardBrush}"
                                                  AutomationProperties.Name="Resource usage by category chart" />
                                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center"
                                                IsHitTestVisible="False" Margin="-80,0,0,0">
                                        <TextBlock Text="{Binding ResourceTotalMemoryUsed}"
                                                   IsVisible="{Binding ShowMemoryMetric}"
                                                   FontSize="16" FontWeight="Bold"
                                                   Foreground="{StaticResource PrimaryTextBrush}"
                                                   HorizontalAlignment="Center" />
                                        <TextBlock Text="{Binding ResourceTotalCpuPercent}"
                                                   IsVisible="{Binding !ShowMemoryMetric}"
                                                   FontSize="16" FontWeight="Bold"
                                                   Foreground="{StaticResource PrimaryTextBrush}"
                                                   HorizontalAlignment="Center" />
                                        <TextBlock Text="Total" Classes="Caption"
                                                   HorizontalAlignment="Center" />
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Top Apps Bar Chart -->
                        <Border Grid.Column="1" Classes="Card" Padding="20" Margin="10,0,0,0">
                            <StackPanel Spacing="12">
                                <TextBlock Text="Top Applications" FontSize="16" FontWeight="SemiBold" />
                                <lvc:CartesianChart Series="{Binding ResourceTopAppsChart}"
                                                    XAxes="{Binding ResourceTopAppsXAxes}"
                                                    YAxes="{Binding ResourceTopAppsYAxes}"
                                                    MinHeight="280"
                                                    Height="400"
                                                    Background="{StaticResource CardBrush}"
                                                    ZoomMode="None"
                                                    AutomationProperties.Name="Top applications by resource usage chart" />
                            </StackPanel>
                        </Border>
                    </Grid>

                    <!-- Historical Trend Chart -->
                    <Border Classes="Card" Padding="20"
                            IsVisible="{Binding ResourceHistoryChart.Length}">
                        <StackPanel Spacing="12">
                            <TextBlock Text="Historical Trends by Category" FontSize="16" FontWeight="SemiBold" />
                            <TextBlock Text="Shows average resource usage over time for the top categories."
                                       Classes="Subtitle" />
                            <lvc:CartesianChart Series="{Binding ResourceHistoryChart}"
                                                XAxes="{Binding ResourceHistoryXAxes}"
                                                YAxes="{Binding ResourceHistoryYAxes}"
                                                Height="300"
                                                LegendPosition="Top"
                                                LegendTextPaint="{Binding LegendTextPaint}"
                                                LegendTextSize="12"
                                                Background="{StaticResource CardBrush}"
                                                ZoomMode="None"
                                                AutomationProperties.Name="Historical resource usage trend chart" />
                        </StackPanel>
                    </Border>

                    <!-- Info Tooltip -->
                    <Border Classes="CompactCard" Padding="14,10">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="â„¹ï¸" FontSize="14" VerticalAlignment="Center" />
                            <TextBlock Text="Shows committed memory (what apps have allocated) with smoothed values. Unlike Task Manager, readings are stable and grouped by application/category."
                                       Classes="Caption" VerticalAlignment="Center" TextWrapping="Wrap" />
                        </StackPanel>
                    </Border>

                    <!-- Empty State -->
                    <Border Classes="Card" Padding="40"
                            IsVisible="{Binding !HasData}"
                            HorizontalAlignment="Center">
                        <StackPanel HorizontalAlignment="Center" Spacing="12">
                            <TextBlock Text="ðŸ§ " FontSize="32" HorizontalAlignment="Center" />
                            <TextBlock Text="No resource data yet"
                                       FontSize="18" FontWeight="Bold"
                                       HorizontalAlignment="Center" />
                            <TextBlock Text="Resource insights will appear after the first polling cycle"
                                       Classes="Subtitle"
                                       HorizontalAlignment="Center" />
                        </StackPanel>
                    </Border>
                </StackPanel>

            </Panel>

        </Grid>
    </ScrollViewer>

</UserControl>
