<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:WireBound.Maui.ViewModels"
             x:Class="WireBound.Maui.Views.SettingsView"
             x:DataType="vm:SettingsViewModel">

    <ScrollView Padding="24">
        <VerticalStackLayout Spacing="24">
            
            <!-- Header -->
            <VerticalStackLayout Spacing="4">
                <Label Text="Settings" 
                       FontSize="32" 
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryTextColor}" />
                <Label Text="Configure monitoring options"
                       FontSize="14"
                       TextColor="{StaticResource SecondaryTextColor}" />
            </VerticalStackLayout>

            <!-- Network Settings -->
            <Border BackgroundColor="{StaticResource CardColor}"
                    StrokeShape="RoundRectangle 12"
                    Stroke="Transparent"
                    Padding="24">
                <VerticalStackLayout Spacing="20">
                    <Label Text="âš™ï¸ Monitoring Settings" 
                           FontSize="16" 
                           FontAttributes="Bold"
                           TextColor="{StaticResource PrimaryTextColor}" />
                    
                    <!-- Network Adapter -->
                    <Grid ColumnDefinitions="*, *" RowDefinitions="Auto, Auto" RowSpacing="4">
                        <Label Text="Network Adapter"
                               FontSize="14"
                               TextColor="{StaticResource PrimaryTextColor}"
                               VerticalOptions="Center" />
                        <Picker Grid.Column="1"
                                ItemsSource="{Binding Adapters}"
                                SelectedItem="{Binding SelectedAdapter}"
                                ItemDisplayBinding="{Binding Name}"
                                TextColor="{StaticResource PrimaryTextColor}"
                                BackgroundColor="{StaticResource SidebarColor}" />
                    </Grid>
                    
                    <BoxView HeightRequest="1" Color="{StaticResource SidebarColor}" />
                    
                    <!-- Polling Interval -->
                    <Grid ColumnDefinitions="*, *">
                        <Label Text="Polling Interval"
                               FontSize="14"
                               TextColor="{StaticResource PrimaryTextColor}"
                               VerticalOptions="Center" />
                        <Picker Grid.Column="1"
                                ItemsSource="{Binding PollingIntervals}"
                                SelectedItem="{Binding PollingIntervalMs}"
                                TextColor="{StaticResource PrimaryTextColor}"
                                BackgroundColor="{StaticResource SidebarColor}" />
                    </Grid>
                    
                    <BoxView HeightRequest="1" Color="{StaticResource SidebarColor}" />
                    
                    <!-- Use IP Helper API -->
                    <Grid ColumnDefinitions="*, Auto">
                        <VerticalStackLayout>
                            <Label Text="Use IP Helper API"
                                   FontSize="14"
                                   TextColor="{StaticResource PrimaryTextColor}" />
                            <Label Text="More accurate but requires elevation"
                                   FontSize="11"
                                   TextColor="{StaticResource SecondaryTextColor}" />
                        </VerticalStackLayout>
                        <Switch Grid.Column="1"
                                IsToggled="{Binding UseIpHelperApi}"
                                OnColor="{StaticResource PrimaryColor}" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Application Settings -->
            <Border BackgroundColor="{StaticResource CardColor}"
                    StrokeShape="RoundRectangle 12"
                    Stroke="Transparent"
                    Padding="24">
                <VerticalStackLayout Spacing="20">
                    <Label Text="ðŸ–¥ï¸ Application Settings" 
                           FontSize="16" 
                           FontAttributes="Bold"
                           TextColor="{StaticResource PrimaryTextColor}" />
                    
                    <!-- Start with Windows -->
                    <Grid ColumnDefinitions="*, Auto">
                        <Label Text="Start with Windows"
                               FontSize="14"
                               TextColor="{StaticResource PrimaryTextColor}"
                               VerticalOptions="Center" />
                        <Switch Grid.Column="1"
                                IsToggled="{Binding StartWithWindows}"
                                OnColor="{StaticResource PrimaryColor}" />
                    </Grid>
                    
                    <BoxView HeightRequest="1" Color="{StaticResource SidebarColor}" />
                    
                    <!-- Minimize to Tray -->
                    <Grid ColumnDefinitions="*, Auto">
                        <Label Text="Minimize to System Tray"
                               FontSize="14"
                               TextColor="{StaticResource PrimaryTextColor}"
                               VerticalOptions="Center" />
                        <Switch Grid.Column="1"
                                IsToggled="{Binding MinimizeToTray}"
                                OnColor="{StaticResource PrimaryColor}" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Save Button -->
            <Button Text="Save Settings"
                    Command="{Binding SaveCommand}"
                    BackgroundColor="{StaticResource PrimaryColor}"
                    TextColor="White"
                    FontAttributes="Bold"
                    CornerRadius="8"
                    HeightRequest="48"
                    HorizontalOptions="Fill" />

            <!-- Status Message -->
            <Label Text="{Binding StatusMessage}"
                   FontSize="14"
                   TextColor="#32CD32"
                   HorizontalOptions="Center"
                   IsVisible="{Binding HasStatusMessage}" />
                   
        </VerticalStackLayout>
    </ScrollView>
</ContentView>
