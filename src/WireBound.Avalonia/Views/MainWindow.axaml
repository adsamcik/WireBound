<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:WireBound.Avalonia.ViewModels"
        xmlns:views="using:WireBound.Avalonia.Views"
        x:Class="WireBound.Avalonia.Views.MainWindow"
        x:DataType="vm:MainViewModel"
        Title="WireBound - Network Traffic Monitor"
        AutomationProperties.Name="WireBound Network Traffic Monitor"
        Width="1200" Height="800"
        MinWidth="900" MinHeight="650"
        Background="{StaticResource BackgroundBrush}"
        WindowStartupLocation="CenterScreen">

    <Design.DataContext>
        <vm:MainViewModel />
    </Design.DataContext>

    <Grid x:Name="RootGrid" ColumnDefinitions="240, *">
        
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- NAVIGATION RAIL                                                  -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        
        <Border Grid.Column="0"
                Background="{StaticResource RailBackgroundBrush}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,0,1,0">
            
            <Grid RowDefinitions="Auto, *, Auto">
                
                <!-- Header -->
                <StackPanel Margin="20,24,20,16" Spacing="16">
                    
                    <!-- App Logo & Title -->
                    <StackPanel Orientation="Horizontal" Spacing="14"
                                AutomationProperties.Name="WireBound Application Logo">
                        <Border Background="{StaticResource PrimaryBrush}"
                                CornerRadius="12"
                                Width="48" Height="48"
                                BoxShadow="0 0 12 0 #8000E5FF">
                            <TextBlock Text="⚡"
                                       FontSize="24"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center" />
                        </Border>
                        
                        <StackPanel x:Name="NavTitleText" VerticalAlignment="Center" Spacing="2">
                            <TextBlock Text="WireBound"
                                       FontSize="20"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource PrimaryTextBrush}" />
                            <TextBlock Text="Network Monitor"
                                       FontSize="12"
                                       Foreground="{StaticResource SecondaryTextBrush}" />
                        </StackPanel>
                    </StackPanel>
                    
                    <!-- Decorative Wire Divider -->
                    <Grid x:Name="NavWireDivider" ColumnDefinitions="Auto, *, Auto" Height="12">
                        <Ellipse Width="6" Height="6" 
                                 Fill="{StaticResource WireColor}"
                                 VerticalAlignment="Center" />
                        <Rectangle Grid.Column="1" 
                                   Height="2" 
                                   Fill="{StaticResource WireColor}"
                                   Margin="4,0" />
                        <Ellipse Grid.Column="2"
                                 Width="6" Height="6" 
                                 Fill="{StaticResource WireColor}"
                                 VerticalAlignment="Center" />
                    </Grid>
                </StackPanel>
                
                <!-- Navigation Items -->
                <ListBox Grid.Row="1"
                         ItemsSource="{Binding NavigationItems}"
                         SelectedItem="{Binding SelectedNavigationItem}"
                         Background="Transparent"
                         Margin="8,0"
                         AutomationProperties.Name="Navigation Menu"
                         AutomationProperties.HelpText="Select a page to navigate to">
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem">
                            <Setter Property="Padding" Value="16,14" />
                            <Setter Property="CornerRadius" Value="10" />
                            <Setter Property="Margin" Value="0,2" />
                        </Style>
                        <Style Selector="ListBoxItem:pointerover /template/ ContentPresenter">
                            <Setter Property="Background" Value="{StaticResource FlyoutItemHoverColor}" />
                        </Style>
                        <Style Selector="ListBoxItem:selected /template/ ContentPresenter">
                            <Setter Property="Background" Value="{StaticResource FlyoutItemActiveColor}" />
                        </Style>
                    </ListBox.Styles>
                    <ListBox.ItemTemplate>
                        <DataTemplate x:DataType="vm:NavigationItem">
                            <Grid>
                                <StackPanel Orientation="Horizontal" Spacing="12"
                                            AutomationProperties.Name="{Binding Title}">
                                    <TextBlock Text="{Binding Icon}" FontSize="16" />
                                    <TextBlock Text="{Binding Title}" 
                                               FontSize="14"
                                               VerticalAlignment="Center" />
                                </StackPanel>
                                <!-- Update badge dot -->
                                <Ellipse Width="8" Height="8"
                                         Fill="{StaticResource AccentBrush}"
                                         HorizontalAlignment="Right" VerticalAlignment="Top"
                                         Margin="0,-2,-4,0"
                                         IsVisible="{Binding HasBadge}" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                
                <!-- Footer -->
                <StackPanel Grid.Row="2" Margin="20,12,20,20" Spacing="12">
                    
                    <!-- Wire Divider -->
                    <Grid ColumnDefinitions="Auto, *, Auto" Height="12">
                        <Ellipse Width="6" Height="6" 
                                 Fill="{StaticResource WireColor}"
                                 VerticalAlignment="Center" />
                        <Rectangle Grid.Column="1" 
                                   Height="2" 
                                   Fill="{StaticResource WireColor}"
                                   Margin="4,0" />
                        <Ellipse Grid.Column="2"
                                 Width="6" Height="6" 
                                 Fill="{StaticResource WireColor}"
                                 VerticalAlignment="Center" />
                    </Grid>
                    
                    <!-- Status Indicator -->
                    <StackPanel Orientation="Horizontal" Spacing="10"
                                AutomationProperties.Name="Monitoring Status: Active"
                                AutomationProperties.HelpText="Network monitoring is currently running">
                        <Ellipse Width="10" Height="10"
                                 Fill="{StaticResource SuccessBrush}"
                                 VerticalAlignment="Center" />
                        <TextBlock x:Name="StatusText" Text="Monitoring Active"
                                   FontSize="12"
                                   Foreground="{StaticResource SuccessBrush}"
                                   VerticalAlignment="Center" />
                    </StackPanel>
                    
                    <!-- Version -->
                    <TextBlock x:Name="VersionText" Text="{Binding Version}"
                               FontSize="11"
                               Foreground="{StaticResource MutedTextBrush}" />
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- ═══════════════════════════════════════════════════════════════ -->
        <!-- MAIN CONTENT AREA                                                -->
        <!-- ═══════════════════════════════════════════════════════════════ -->
        
        <ContentControl Grid.Column="1"
                        Content="{Binding CurrentView}"
                        AutomationProperties.Name="Main Content Area"
                        AutomationProperties.HelpText="Displays the currently selected page" />
        
    </Grid>
</Window>
