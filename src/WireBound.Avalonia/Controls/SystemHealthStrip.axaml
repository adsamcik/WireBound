<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="using:WireBound.Avalonia.Controls"
             x:Class="WireBound.Avalonia.Controls.SystemHealthStrip"
             x:DataType="controls:SystemHealthStrip">

    <Border Classes="CompactCard" Padding="8,6">
        <StackPanel Orientation="Horizontal" Spacing="0">
            
            <!-- CPU Metric -->
            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                <controls:CircularGauge Classes="Compact"
                                        Value="{Binding CpuPercent, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}"
                                        GaugeColor="{Binding CpuGaugeColor, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}"
                                        BackgroundColor="{StaticResource CpuBgTintBrush}"
                                        ShowLabel="False" />
                <StackPanel VerticalAlignment="Center" Spacing="0">
                    <TextBlock Text="CPU"
                               FontSize="11"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource CpuBrush}" />
                    <TextBlock Text="{Binding CpuPercentText, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}"
                               FontSize="13"
                               FontWeight="Bold"
                               Foreground="{StaticResource PrimaryTextBrush}" />
                </StackPanel>
            </StackPanel>

            <!-- Separator -->
            <Border Width="1"
                    Background="{StaticResource DividerBrush}"
                    Margin="16,4"
                    VerticalAlignment="Stretch" />

            <!-- RAM Metric -->
            <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                <controls:CircularGauge Classes="Compact"
                                        Value="{Binding MemoryPercent, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}"
                                        GaugeColor="{Binding MemoryGaugeColor, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}"
                                        BackgroundColor="{StaticResource MemoryBgTintBrush}"
                                        ShowLabel="False" />
                <StackPanel VerticalAlignment="Center" Spacing="0">
                    <TextBlock Text="RAM"
                               FontSize="11"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource MemoryBrush}" />
                    <TextBlock Text="{Binding MemoryPercentText, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}"
                               FontSize="13"
                               FontWeight="Bold"
                               Foreground="{StaticResource PrimaryTextBrush}" />
                </StackPanel>
            </StackPanel>

            <!-- GPU Section (conditionally visible) -->
            <StackPanel Orientation="Horizontal"
                        IsVisible="{Binding ShowGpu, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}">
                
                <!-- Separator -->
                <Border Width="1"
                        Background="{StaticResource DividerBrush}"
                        Margin="16,4"
                        VerticalAlignment="Stretch" />

                <!-- GPU Metric -->
                <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
                    <controls:CircularGauge Classes="Compact"
                                            Value="{Binding GpuDisplayPercent, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}"
                                            GaugeColor="{Binding GpuGaugeColor, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}"
                                            BackgroundColor="{StaticResource GpuBgTintBrush}"
                                            ShowLabel="False" />
                    <StackPanel VerticalAlignment="Center" Spacing="0">
                        <TextBlock Text="GPU"
                                   FontSize="11"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource GpuBrush}" />
                        <TextBlock Text="{Binding GpuPercentText, RelativeSource={RelativeSource AncestorType=controls:SystemHealthStrip}}"
                                   FontSize="13"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource PrimaryTextBrush}" />
                    </StackPanel>
                </StackPanel>
            </StackPanel>

        </StackPanel>
    </Border>

</UserControl>
